# This program assumes you've bought and downloaded the Mandarin Pronunciation Trainer package by Gabriel Wyner:  https://fluent-forever.com/product/fluent-forever-pronunciation-trainer/ 

DATA_DIR <- "cache/fluent_forever_trainer"
AUDIO_DIR <- "audio/fluent_forever_trainer"
dir.create(AUDIO_DIR)

files <- list.files(DATA_DIR, pattern=".mp3")

main <- function() {
    mapping <- read.csv(text = get_mapping())
    files <- mapping$filename

    targets <- file.path(DATA_DIR, files)

    pinyin <- mapping$pinyin
    pinyin <- ifelse(duplicated(pinyin), paste0(pinyin, "_alt"), pinyin)
    pinyin <- ifelse(duplicated(pinyin), paste0(pinyin, "2"), pinyin)
    links <- paste0(pinyin, ".mp3")
    links <- file.path(AUDIO_DIR, links)

    invisible(file.copy(targets, links))
}

get_mapping <- function() { 
"filename,pinyin
10-li3zi-speaker2.mp3,li3zi5
100-bo1cai4-speaker2.mp3,bo1cai4
100A-Speaker2-you4.mp3,you4
101-po1mo4hua4-speaker3.mp3,po1mo4hua4
102-mo2gui3-speaker4.mp3,mo2gui3
102A-Speaker3-qi1you1.mp3,qi1you1
102B-Speaker3-qi1ou1.mp3,qi1ou1
103-fo2si4-speaker3.mp3,fo2si4
105-ju2hua1-speaker3.mp3,ju2hua1
106-que4chao2-speaker4.mp3,que4chao2
107-quan2tou-speaker1.mp3,quan2tou5
107A-Speaker2-dian1ang1.mp3,dian1ang1
107B-Speaker2-die1nang1.mp3,die1nang1
108-qun2zi-speaker2.mp3,qun2zi5
108A-Speaker3-ni4yan4.mp3,ni4yan4
108B-Speaker3-ni4en4.mp3,ni4en4
10A-Speaker2-nao4.mp3,nao4
11-ge1zi-speaker3.mp3,ge1zi5
110-zhi3tou-speaker4.mp3,zhi3tou5
111-chi3zi-speaker1.mp3,chi3zi5
112-shi2shan1-speaker2.mp3,shi2shan1
113-ri4li4-speaker3.mp3,ri4li4
117-zi4ji1-speaker4.mp3,zi4ji1
118-ci4dao1-speaker2.mp3,ci4dao1
119-si4miao4-speaker3.mp3,si4miao4
12-ku4zi-speaker4.mp3,ku4zi5
121A-Speaker2-pi2yang2.mp3,pi2yang2
121B-Speaker2-pi2ang2.mp3,pi2ang2
122A-Speaker2-ping2.mp3,ping2
129A-speaker4-ning2.mp3,ning2
129B-speaker4-nin2.mp3,nin2
13-huo3che1-speaker1.mp3,huo3che1
14-ju2zi-speaker2.mp3,ju2zi5
14-júzi-speaker4.mp3,ju2zi5
140A-Speaker1-nu4.mp3,nu4
148A-Speaker2-wa4.mp3,wa4
149A-Speaker2-nu3wa3.mp3,nu2wa3
149B-Speaker2-nu3a3.mp3,nu2a3
15-qi4che1-speaker3.mp3,qi4che1
153A-Speaker1-duo4.mp3,duo4
156A-Speaker1-pu3wo3.mp3,pu2wo3
156B-Speaker1-pu3ou3.mp3,pu2ou3
157A-Speaker1-wai4.mp3,wai4
16-xi1gua1-speaker4.mp3,xi1gua1
160A-Speaker3-pu4wai4.mp3,pu4wai4
160B-Speaker3-pu4ai4.mp3,pu4ai4
166A-Speaker2-wan2.mp3,wan2
17-zhi1zhu1-speaker1.mp3,zhi1zhu1
171-2A-Speaker1-wen2.mp3,wen2
175A-speaker4-bu4wen4.mp3,bu4wen4
175B-speaker4-bu4en4.mp3,bu4en4
177A-Speaker1-wen4.mp3,wen4
17A-Speaker1-ang4.mp3,ang4
18-chu2fang2-speaker2.mp3,chu2fang2
182A-Speaker3-chuang2.mp3,chuang2
182B-Speaker3-chuan2.mp3,chuan2
183A-speaker4-wu4wang4.mp3,wu4wang4
183B-speaker4-wu4ang4.mp3,wu4ang4
188A-Speaker2-yu2.mp3,yu2
19-shi2tou-speaker3.mp3,shi2tou5
192A-Speaker3-lü2.mp3,lv2
192B-Speaker3-lu2.mp3,lu2
2-ba4ba-speaker3.mp3,ba4ba5
20-ri4ben3-speaker4.mp3,ri4ben3
200A-Speaker3-xue2.mp3,xue2
200B-Speaker3-xu2.mp3,xu2
203A-speaker4-yuan4a4.mp3,yuan4a4
205A-Speaker1-jun4.mp3,jun4
20A-Speaker2-pang4.mp3,pang4
21-zi3dan4-speaker1.mp3,zi3dan4
210A-Speaker3-jun4ang4.mp3,jun4ang4
210B-Speaker3-ju4nang4.mp3,ju4nang4
214A-Speaker2-bai2.mp3,bai2
219A-speaker4-pan4.mp3,pan4
219B-speaker4-ban4.mp3,ban4
21A-Speaker3-tang2.mp3,tang2
21B-Speaker3-tan2.mp3,tan2
22-ci4wei-speaker2.mp3,ci4wei5
23-si1ji1-speaker3.mp3,si1ji1
233A-Speaker1-di2.mp3,di2
235A-Speaker1-ti2.mp3,ti2
240A-Speaker3-tuo1.mp3,tuo1
240B-Speaker3-duo1.mp3,duo1
243A-Speaker1-li2.mp3,li2
244A-Speaker2-lin2.mp3,lin2
250A-Speaker1-gou4.mp3,gou4
251A-Speaker2-kang2.mp3,kang2
255A-speaker4-kuo4.mp3,kuo4
255B-speaker4-guo4.mp3,guo4
257A-Speaker1-hai4.mp3,hai4
26-ka3pian4-speaker2.mp3,ka3pian4
260A-Speaker3-ha1.mp3,ha1
260B-Speaker3-a1.mp3,a1
262A-Speaker2-ji2.mp3,ji2
266A-Speaker2-ji4.mp3,ji4
268A-Speaker2-qi4.mp3,qi4
27-sai4che1-speaker3.mp3,sai4che1
271A-speaker4-qi1.mp3,qi1
271B-speaker4-ji1.mp3,ji1
276A-Speaker2-xi2.mp3,xi2
278A-Speaker3-xi2.mp3,xi2
278B-Speaker3-ji2.mp3,ji2
279A-speaker4-xi2.mp3,xi2
279B-speaker4-qi2.mp3,qi2
28-bao4zhi3-speaker4.mp3,bao4zhi3
285A-Speaker1-zhou2.mp3,zhou2
285A-Speaker2-zhei2.mp3,zhei2
29-lan2zi-speaker1.mp3,lan2zi5
290A-Speaker2-chou2.mp3,chou2
292A-Speaker3-chi2.mp3,chi2
292B-Speaker3-zhi2.mp3,zhi2
295A-Speaker1-shou4.mp3,shou4
295A-Speaker2-shu4.mp3,shu4
297A-speaker4-shi1.mp3,shi1
297B-speaker4-zhi1.mp3,zhi1
2A-Speaker2-fan2.mp3,fan2
3-po2po-speaker4.mp3,po2po5
30-fang1xing2-speaker2.mp3,fang1xing1
300A-Speaker3-shi2.mp3,shi2
300B-Speaker3-chi2.mp3,chi2
301A-Speaker2-rang2.mp3,rang2
31-zhang4zi-speaker3.mp3,zhang4zi5
311A-Speaker2-ei4zai4.mp3,ei4zai4
312A-Speaker1-ou4zai4.mp3,ou4zai4
315A-Speaker2-ei4zai4.mp3,ei4zai4
316A-Speaker1-ou4zai4.mp3,ou4zai4
317A-speaker4-zu3.mp3,zu3
317B-speaker4-zhu3.mp3,zhu3
32-mang2guo3-speaker4.mp3,mang2guo3
33-rou4bing3-speaker3.mp3,rou4bing3
334A-Speaker1-sai4.mp3,sai4
336A-Speaker3-su2.mp3,su2
336B-Speaker3-zu2.mp3,zu2
337A-speaker4-se4.mp3,se4
337B-speaker4-ce4.mp3,ce4
34-long2zi-speaker4.mp3,long2zi5
342A-Speaker1-ru2.mp3,ru2
35-cong1shu4-speaker3.mp3,cong1shu4
351A-Speaker1-sui2.mp3,sui2
352A-Speaker2-meng4.mp3,meng4
36-he2zi-speaker1.mp3,he2zi5
361A-Speaker1-zu2.mp3,zu2
367A-Speaker1-zhu2.mp3,zhu2
37-bei4xin1-speaker2.mp3,bei4xin1
38-fen2mu4-speaker3.mp3,fen2mu4
3A-Speaker1-pa2.mp3,pa2
4-ma1ma-speaker1.mp3,ma1ma5
40-feng1zheng1-speaker4.mp3,feng1zheng1
40A-speaker4-ne4.mp3,ne4
40B-speaker4-nü4.mp3,nv4
425-Speaker2-xiang1.mp3,xiang1
434-Speaker3-lun2zi.mp3,lun2zi5
44-xia1zi-speaker2.mp3,xia1zi5
446-Speaker3-ceng2.mp3,ceng2
449-Speaker2-guo1.mp3,guo1
45-jiao3zi-speaker3.mp3,jiao3zi5
46-qie2zi-speaker4.mp3,qie2zi5
469-Speaker2-hua4.mp3,hua4
46A-Speaker2-ce4.mp3,ce4
46B-Speaker2-ci4.mp3,ci4
47-liu2shui3-speaker1.mp3,liu2shui3
472-Speaker2-di1.mp3,di1
473-Speaker2-yang2cong1.mp3,yang2cong1
48-nian2li4-speaker2.mp3,nian2li4
48A-Speaker1-nei4.mp3,nei4
49-mian4tiao2-speaker3.mp3,mian4tiao2
5-fo2xiang4-speaker2.mp3,fo2xiang4
50-jin1zi-speaker3.mp3,jin1zi5
51-xiang1zi-speaker4.mp3,xiang1zi5
52-ting1tong3-speaker1.mp3,ting1tong3
54-xiong1zhang1-speaker2.mp3,xiong1zhang1
55-tu4zi-speaker3.mp3,tu4zi5
56-hua4pian1-speaker4.mp3,hua4pian1
57-luo2bo-speaker1.mp3,luo2bo5
59A-Speaker1-ren2.mp3,ren2
59B-Speaker1-rong2.mp3,rong2
6-da4sha4-speaker3.mp3,da4sha4
60-shui3guan3-speaker3.mp3,shui2guan3
61-wei1hua4bing3-speaker4.mp3,wei1hua4bing3
62A-speaker4-zen4ang4.mp3,zen4ang4
62B-speaker4-ze4nang4.mp3,ze4nang4
66-nu3hai2-speaker3.mp3,nu3hai2
66-nü3hai2-speaker3.mp3,nv3hai2
67A-Speaker1-beng4.mp3,beng4
67B-Speaker1-ben4.mp3,ben4
69-jun4zi-speaker2.mp3,jun4zi5
6A-Speaker2-san4.mp3,san4
7-tan3zi-speaker4.mp3,tan3zi5
70-er3duo-speaker4.mp3,er3duo5
72-yi1sheng1-speaker3.mp3,yi1sheng1
73-ya1zi-speaker2.mp3,ya1zi5
74-yao4pian4-speaker3.mp3,yao4pian4
74A-speaker4-leng2.mp3,leng2
74B-speaker4-long4.mp3,long4
75-ye4zi-speaker4.mp3,ye4zi5
76-you4zi-speaker1.mp3,you4zi5
77-yan4zi-speaker2.mp3,yan4zi5
77A-Speaker1-yi4.mp3,yi4
79-yin2hang2-speaker3.mp3,yin2hang2
7A-Speaker1-pai4.mp3,pai4
8-nai3niu2-speaker1.mp3,nai3niu2
80-yang2tuo2-speaker4.mp3,yang2tuo2
80A-Speaker2-zhi2ni2.mp3,zhi2ni2
81-ying3zi-speaker1.mp3,ying3zi5
82-yong3zhuang1-speaker2.mp3,yong3zhuang1
83-wu1ya1-speaker3.mp3,wu1ya1
83A-Speaker1-shi4.mp3,shi4
85-wa3pian4-speaker4.mp3,wa3pian4
86-wo4shi4-speaker1.mp3,wo4shi4
87-wai4sun1-speaker2.mp3,wai4sun1
88-wei2jin1-speaker3.mp3,wei2jin1
89-wan3-speaker4.mp3,wan3
8A-Speaker2-sai4.mp3,sai4
90-wen2xiang1-speaker1.mp3,wen2xiang1
91-wang3qiu2-speaker2.mp3,wang3qiu2
92-yu2wang3-speaker3.mp3,yu2wang3
93-yue4pu3-speaker4.mp3,yue4pu3
93A-Speaker1-miao4.mp3,miao4
94-jue2zi-speaker4.mp3,jue2zi5
95-yuan4zi-speaker1.mp3,yuan4zi5
96-yun4dong4yuan2-speaker2.mp3,yun4dong4yuan2
97-weng4-speaker1.mp3,weng4
99-o-speaker1.mp3,o1
T1-Speaker1-ma1.mp3,ma1
T11-Speaker2-mama.mp3,ma1ma1
T11-Speaker4-tiankong.mp3,tiang1kong1
T12-Speaker2-mama.mp3,ma1ma2
T12-Speaker4-yingxiong.mp3,ying1xiong2
T13-speaker1-mama.mp3,ma1ma3
T13-Speaker4-qiangguan.mp3,qiang1guan3
T14-Speaker1-mama.mp3,ma1ma4
T14-Speaker4-xinzang.mp3,xin1zang4
T15-Speaker2-mama.mp3,ma1ma5
T15-Speaker3-gezi.mp3,ge1zi5
T2-Speaker1-ma2.mp3,ma2
T21-Speaker2-huangjin.mp3,huang2jin1
T21-Speaker3-mama.mp3,ma2ma1
T22-Speaker3-lingqian.mp3,ling2qian2
T22-Speaker4-mama.mp3,ma2ma2
T23-Speaker1-mama.mp3,ma2ma3
T23-Speaker4-mianzi.mp3,mian2zi3
T24-Speaker2-mama.mp3,ma2ma4
T24-Speaker3-maque.mp3,ma2que4
T25-Speaker2-houzi.mp3,huo2zi5
T25-Speaker3-mama.mp3,ma2ma5
T3-Speaker1-ma3.mp3,ma3
T31-Speaker2-xue3hua1.mp3,xue3hua1
T31-Speaker4-mama.mp3,ma3ma1
T32-Speaker1-mama.mp3,ma3ma2
T32-Speaker4-meiyuan.mp3,mei3yuan2
T33-Speaker2-mama.mp3,ma2ma3
T33-Speaker3-zumu.mp3,zu2mu3
T34-Speaker2-shoutao.mp3,shou3tao4
T34-Speaker3-mama.mp3,ma3ma4
T35-Speaker2-zao3zi.mp3,zao3zi5
T35-Speaker3-mama.mp3,ma3ma5
T4-Speaker1-ma4.mp3,ma4
T41-Speaker1-mama.mp3,ma4ma1
T41-Speaker3-kuyao.mp3,ku4yao1
T42-Speaker2-mama.mp3,ma4ma2
T42-Speaker4-mianrong.mp3,mian4rong2
T43-speaker1-xiukou.mp3,xiu4kou3
T43-Speaker4-mama.mp3,ma4ma3
T44-speaker1-bumao.mp3,bu4mao4
T44-Speaker4-mama.mp3,ma4ma4
T45-speaker1-yuanzi.mp3,yuan4zi5
T45-Speaker3-mama.mp3,ma4ma5"
}

main()
